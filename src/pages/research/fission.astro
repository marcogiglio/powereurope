---
import BaseLayout from '../../layouts/BaseLayout.astro';
import ScrollySection from '../../components/ScrollySection.astro';
---

<BaseLayout
  title="Cutting-Edge Fission Reactor Technologies | PowerEurope"
  description="A comprehensive analysis of Generation III/III+ reactors, SMRs, and advanced designs - their economics, safety, and fuel cycles."
>
  <!-- Hero -->
  <header class="py-20 md:py-32 border-b border-ink-200">
    <div class="container-narrow">
      <p class="label mb-6">Research</p>
      <h1 class="mb-8">Cutting-Edge Fission Reactor Technologies</h1>
      <p class="text-xl md:text-2xl text-ink-600 leading-relaxed max-w-xl font-serif">
        Current status and outlook for Generation III/III+, Small Modular Reactors, and advanced designs across Europe, the US, and China.
      </p>
      <div class="mt-8 flex items-center gap-4 text-sm text-ink-500">
        <span>January 2026</span>
        <span class="text-ink-300">·</span>
        <span>30 min read</span>
      </div>
    </div>
  </header>

  <!-- Intro -->
  <section class="section border-b border-ink-200">
    <div class="container-narrow">
      <div class="prose">
        <p>
          Nuclear fission technology is evolving through successive "generations" of reactor designs. This report analyzes three categories of reactors: those <strong>commercially deployed today</strong> (Category 1), designs that are <strong>licensed but not yet widely deployed</strong> (Category 2), and <strong>advanced reactors in late-stage demonstration</strong> (Category 3).
        </p>
      </div>
    </div>
  </section>

  <!-- Technology Landscape -->
  <section class="section border-b border-ink-200 bg-paper-100">
    <div class="container-wide">
      <h2 class="text-display-sm mb-4">The Technology Landscape</h2>
      <p class="text-ink-600 font-serif text-lg mb-8 max-w-2xl">
        Where each reactor design sits in terms of commercial readiness and deployment scale.
      </p>
      <div id="tech-landscape" class="w-full">
        <div class="grid grid-cols-3 gap-4 text-sm">
          <!-- Header -->
          <div class="font-semibold text-center py-3 border-b-2 border-ink-300">Category 1<br><span class="font-normal text-ink-500">Deployed</span></div>
          <div class="font-semibold text-center py-3 border-b-2 border-ink-300">Category 2<br><span class="font-normal text-ink-500">Licensed</span></div>
          <div class="font-semibold text-center py-3 border-b-2 border-ink-300">Category 3<br><span class="font-normal text-ink-500">Demonstration</span></div>

          <!-- Large PWR -->
          <div class="bg-emerald-100 border border-emerald-300 p-4 rounded">
            <p class="font-semibold text-emerald-800">Large PWR</p>
            <ul class="mt-2 text-emerald-700 space-y-1">
              <li>AP1000</li>
              <li>EPR</li>
              <li>Hualong One</li>
              <li>VVER-1200</li>
              <li>APR-1400</li>
            </ul>
          </div>
          <div class="bg-blue-50 border border-blue-200 p-4 rounded">
            <p class="font-semibold text-blue-800">SMR (PWR)</p>
            <ul class="mt-2 text-blue-700 space-y-1">
              <li>NuScale VOYGR</li>
              <li>BWRX-300</li>
              <li>Rolls-Royce SMR</li>
            </ul>
          </div>
          <div class="bg-amber-50 border border-amber-200 p-4 rounded">
            <p class="font-semibold text-amber-800">Molten Salt</p>
            <ul class="mt-2 text-amber-700 space-y-1">
              <li>TMSR-LF1 (China)</li>
              <li>Kairos FHR</li>
              <li>Terrestrial IMSR</li>
            </ul>
          </div>

          <!-- Fast Reactors -->
          <div class="bg-emerald-100 border border-emerald-300 p-4 rounded">
            <p class="font-semibold text-emerald-800">Fast Reactor</p>
            <ul class="mt-2 text-emerald-700 space-y-1">
              <li>BN-800 (Russia)</li>
            </ul>
          </div>
          <div class="bg-blue-50 border border-blue-200 p-4 rounded opacity-50 flex items-center justify-center">
            <p class="text-ink-400 italic">—</p>
          </div>
          <div class="bg-amber-50 border border-amber-200 p-4 rounded">
            <p class="font-semibold text-amber-800">Sodium Fast</p>
            <ul class="mt-2 text-amber-700 space-y-1">
              <li>Natrium</li>
              <li>CFR-600 (China)</li>
            </ul>
          </div>

          <!-- HTGR -->
          <div class="bg-emerald-100 border border-emerald-300 p-4 rounded">
            <p class="font-semibold text-emerald-800">HTGR</p>
            <ul class="mt-2 text-emerald-700 space-y-1">
              <li>HTR-PM (China)</li>
            </ul>
          </div>
          <div class="bg-blue-50 border border-blue-200 p-4 rounded opacity-50 flex items-center justify-center">
            <p class="text-ink-400 italic">—</p>
          </div>
          <div class="bg-amber-50 border border-amber-200 p-4 rounded">
            <p class="font-semibold text-amber-800">HTGR</p>
            <ul class="mt-2 text-amber-700 space-y-1">
              <li>Xe-100</li>
              <li>Project Pele</li>
            </ul>
          </div>

          <!-- Lead -->
          <div class="bg-ink-100 border border-ink-200 p-4 rounded opacity-50 flex items-center justify-center">
            <p class="text-ink-400 italic">—</p>
          </div>
          <div class="bg-ink-100 border border-ink-200 p-4 rounded opacity-50 flex items-center justify-center">
            <p class="text-ink-400 italic">—</p>
          </div>
          <div class="bg-amber-50 border border-amber-200 p-4 rounded">
            <p class="font-semibold text-amber-800">Lead-Cooled</p>
            <ul class="mt-2 text-amber-700 space-y-1">
              <li>BREST-OD-300</li>
              <li>ALFRED</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Reactor Categories Scrolly -->
  <section class="border-b border-ink-200">
    <ScrollySection id="categories-scrolly" graphicPosition="right">
      <div slot="graphic">
        <div class="w-full max-w-md">
          <div id="category-display" class="text-center">
            <div class="mb-6">
              <p class="text-stat" id="category-number">1</p>
              <p class="text-display-sm mt-2" id="category-name">Commercially Deployed</p>
            </div>
            <div id="reactor-list" class="text-left border border-ink-200 p-6 bg-white">
              <p class="label mb-4">Key Reactors</p>
              <ul class="space-y-2 text-sm" id="reactor-items">
                <li class="flex justify-between"><span>AP1000</span><span class="text-ink-500">1,150 MW</span></li>
                <li class="flex justify-between"><span>EPR</span><span class="text-ink-500">1,600 MW</span></li>
                <li class="flex justify-between"><span>Hualong One</span><span class="text-ink-500">1,090 MW</span></li>
                <li class="flex justify-between"><span>VVER-1200</span><span class="text-ink-500">1,200 MW</span></li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div slot="steps" class="py-20 lg:py-40">
        <div class="step px-5 lg:px-10 min-h-[80vh] lg:min-h-screen flex items-center" data-step="0" data-category="1">
          <div class="bg-white p-8 lg:p-10 border border-ink-200 max-w-md">
            <p class="label mb-3">Category 1</p>
            <h3 class="text-display-sm mb-4">Commercially Deployed</h3>
            <p class="text-ink-600 font-serif text-lg leading-relaxed mb-4">
              Generation III/III+ reactors already in commercial operation worldwide. Includes large LWRs with enhanced safety: AP1000, EPR, VVER-1200, APR1400, and Hualong One.
            </p>
            <p class="text-sm text-ink-500">
              First grid connections: 2016 (VVER-1200), 2018 (AP1000, EPR), 2020 (Hualong One)
            </p>
          </div>
        </div>

        <div class="step px-5 lg:px-10 min-h-[80vh] lg:min-h-screen flex items-center" data-step="1" data-category="2">
          <div class="bg-white p-8 lg:p-10 border border-ink-200 max-w-md">
            <p class="label mb-3">Category 2</p>
            <h3 class="text-display-sm mb-4">Licensed, Limited Deployment</h3>
            <p class="text-ink-600 font-serif text-lg leading-relaxed mb-4">
              Designs that have completed regulatory licensing but have few or no commercial units operating. Many are SMRs awaiting first-of-a-kind deployment.
            </p>
            <p class="text-sm text-ink-500">
              Key examples: NuScale VOYGR (first SMR certified by NRC), BWRX-300, Rolls-Royce SMR
            </p>
          </div>
        </div>

        <div class="step px-5 lg:px-10 min-h-[80vh] lg:min-h-screen flex items-center" data-step="2" data-category="3">
          <div class="bg-white p-8 lg:p-10 border border-ink-200 max-w-md">
            <p class="label mb-3">Category 3</p>
            <h3 class="text-display-sm mb-4">Advanced Demonstrations</h3>
            <p class="text-ink-600 font-serif text-lg leading-relaxed mb-4">
              Generation IV reactors in prototype or demonstration phase. New coolant types, fuel forms, and operating regimes for improved economics, safety, and sustainability.
            </p>
            <p class="text-sm text-ink-500">
              Includes: Sodium Fast Reactors, Molten Salt Reactors, Lead-Cooled Reactors, High-Temperature Gas Reactors
            </p>
          </div>
        </div>
      </div>
    </ScrollySection>
  </section>

  <!-- Key Stats -->
  <section class="section border-b border-ink-200 bg-ink-950 text-white">
    <div class="container-wide">
      <h2 class="text-display-sm text-white mb-10">Category 1: Economic Performance</h2>
      <div class="grid md:grid-cols-4 gap-8 md:gap-6">
        <div class="border-t-2 border-white pt-4">
          <p class="text-stat text-white">$1,200</p>
          <p class="text-ink-300 mt-2">Overnight cost per kW (Russia VVER domestic)</p>
        </div>
        <div class="border-t-2 border-white pt-4">
          <p class="text-stat text-white">$3,500</p>
          <p class="text-ink-300 mt-2">Overnight cost per kW (China Hualong One)</p>
        </div>
        <div class="border-t-2 border-white pt-4">
          <p class="text-stat text-white">5-6 yrs</p>
          <p class="text-ink-300 mt-2">Construction time (Asia, standardized)</p>
        </div>
        <div class="border-t-2 border-white pt-4">
          <p class="text-stat text-white">$63</p>
          <p class="text-ink-300 mt-2">LCOE per MWh (IEA 2023 average)</p>
        </div>
      </div>
      <p class="text-xs text-ink-500 mt-10">Western FOAK projects significantly higher: Hinkley Point C ~$8,000-10,000/kW due to delays</p>
    </div>
  </section>

  <!-- LCOE Waterfall Chart -->
  <section class="section border-b border-ink-200">
    <div class="container-wide">
      <h2 class="text-display-sm mb-4">What Drives Nuclear LCOE?</h2>
      <p class="text-ink-600 font-serif text-lg mb-8 max-w-2xl">
        Financing and construction time dominate nuclear costs. Fuel is a small fraction—the key to affordable nuclear is fast, predictable construction.
      </p>
      <div id="lcoe-waterfall-chart" class="w-full h-[400px] bg-paper-100 border border-ink-200 flex items-center justify-center">
        <p class="text-ink-400">Loading chart...</p>
      </div>
      <p class="text-sm text-ink-500 mt-4">
        LCOE = Levelized Cost of Energy. Components shown for a typical Gen III+ reactor with 7% discount rate and 60-year lifetime.
      </p>
    </div>
  </section>

  <!-- CapEx vs Build Time Scatter -->
  <section class="section border-b border-ink-200 bg-paper-100">
    <div class="container-wide">
      <h2 class="text-display-sm mb-4">Execution Is Everything</h2>
      <p class="text-ink-600 font-serif text-lg mb-8 max-w-2xl">
        The same reactor design can cost wildly different amounts depending on construction execution. Asian projects consistently outperform Western first-of-a-kind builds.
      </p>
      <div id="capex-scatter-chart" class="w-full h-[450px] bg-white border border-ink-200 flex items-center justify-center">
        <p class="text-ink-400">Loading chart...</p>
      </div>
      <div class="mt-6 flex flex-wrap gap-6 text-sm">
        <div class="flex items-center gap-2">
          <span class="w-3 h-3 rounded-full bg-red-500"></span>
          <span>Western FOAK</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="w-3 h-3 rounded-full bg-emerald-500"></span>
          <span>China</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="w-3 h-3 rounded-full bg-blue-500"></span>
          <span>South Korea/UAE</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="w-3 h-3 rounded-full bg-amber-500"></span>
          <span>Russia</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Deployed Reactors Table -->
  <section class="section border-b border-ink-200">
    <div class="container-wide">
      <h2 class="text-display-sm mb-4">Category 1 Reactors: Global Deployment</h2>
      <p class="text-ink-600 font-serif text-lg mb-10 max-w-2xl">
        Generation III/III+ reactors are being deployed primarily in Asia, with slower progress in the West due to first-of-a-kind challenges.
      </p>

      <div class="overflow-x-auto -mx-5 px-5">
        <table class="data-table text-sm">
          <thead>
            <tr>
              <th>Reactor</th>
              <th>Type</th>
              <th>Capacity</th>
              <th>Deployments</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="font-medium">AP1000</td>
              <td>Gen III+ PWR</td>
              <td>~1,150 MW</td>
              <td>China (4), USA (2), UK (planned)</td>
              <td>Online 2018 (CN), 2023 (US)</td>
            </tr>
            <tr>
              <td class="font-medium">EPR</td>
              <td>Gen III+ PWR</td>
              <td>1,600-1,750 MW</td>
              <td>China (2), Finland (1), France (1), UK (2 u/c)</td>
              <td>Online 2018 (CN)</td>
            </tr>
            <tr>
              <td class="font-medium">APR-1400</td>
              <td>Gen III PWR</td>
              <td>~1,400 MW</td>
              <td>South Korea (4), UAE (4)</td>
              <td>Online 2016 (KR), 2020 (UAE)</td>
            </tr>
            <tr>
              <td class="font-medium">VVER-1200</td>
              <td>Gen III+ PWR</td>
              <td>~1,200 MW</td>
              <td>Russia, Belarus, Turkey (u/c), Bangladesh (u/c)</td>
              <td>Online 2016 (RU)</td>
            </tr>
            <tr>
              <td class="font-medium">Hualong One</td>
              <td>Gen III+ PWR</td>
              <td>~1,090 MW</td>
              <td>China, Pakistan</td>
              <td>Online 2020 (CN), 2021 (PK)</td>
            </tr>
            <tr>
              <td class="font-medium">BN-800</td>
              <td>Fast Reactor</td>
              <td>~880 MW</td>
              <td>Russia (1)</td>
              <td>Online 2016 (prototype)</td>
            </tr>
            <tr>
              <td class="font-medium">HTR-PM</td>
              <td>HTGR</td>
              <td>2×105 MW</td>
              <td>China (1)</td>
              <td>Grid 2022 (pilot)</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- Defense in Depth Diagram -->
  <section class="section border-b border-ink-200 bg-paper-100">
    <div class="container-wide">
      <h2 class="text-display-sm mb-4">Defense in Depth</h2>
      <p class="text-ink-600 font-serif text-lg mb-8 max-w-2xl">
        Multiple independent barriers prevent radioactive release. Each layer assumes all previous layers have failed.
      </p>
      <div class="flex flex-col lg:flex-row items-center justify-center gap-8">
        <!-- Concentric rings diagram -->
        <div id="defense-rings" class="relative w-80 h-80 flex items-center justify-center">
          <!-- Outer ring - Exclusion Zone -->
          <div class="absolute w-80 h-80 rounded-full border-4 border-dashed border-ink-300 flex items-center justify-center">
            <span class="absolute -top-3 bg-paper-100 px-2 text-xs text-ink-500 font-semibold">EXCLUSION ZONE</span>
          </div>
          <!-- Ring 5 - Containment -->
          <div class="absolute w-64 h-64 rounded-full bg-ink-200 flex items-center justify-center">
            <span class="absolute -top-2 bg-ink-200 px-2 text-xs text-ink-600 font-semibold">CONTAINMENT</span>
          </div>
          <!-- Ring 4 - Reactor Building -->
          <div class="absolute w-52 h-52 rounded-full bg-ink-300 flex items-center justify-center">
            <span class="absolute -top-2 bg-ink-300 px-2 text-xs text-ink-700 font-semibold">REACTOR BUILDING</span>
          </div>
          <!-- Ring 3 - Pressure Vessel -->
          <div class="absolute w-40 h-40 rounded-full bg-ink-400 flex items-center justify-center">
            <span class="absolute -top-2 bg-ink-400 px-2 text-xs text-white font-semibold">PRESSURE VESSEL</span>
          </div>
          <!-- Ring 2 - Cladding -->
          <div class="absolute w-28 h-28 rounded-full bg-ink-600 flex items-center justify-center">
            <span class="absolute -top-1 bg-ink-600 px-1 text-[10px] text-white font-semibold">CLADDING</span>
          </div>
          <!-- Center - Fuel -->
          <div class="absolute w-16 h-16 rounded-full bg-amber-500 flex items-center justify-center">
            <span class="text-xs text-white font-bold">FUEL</span>
          </div>
        </div>

        <!-- Legend -->
        <div class="space-y-3 text-sm max-w-sm">
          <div class="flex items-start gap-3">
            <span class="w-4 h-4 rounded-full bg-amber-500 flex-shrink-0 mt-0.5"></span>
            <div><strong>Fuel matrix</strong> — Ceramic UO₂ retains >99% of fission products at operating temps</div>
          </div>
          <div class="flex items-start gap-3">
            <span class="w-4 h-4 rounded-full bg-ink-600 flex-shrink-0 mt-0.5"></span>
            <div><strong>Cladding</strong> — Zirconium alloy tubes seal fuel from coolant</div>
          </div>
          <div class="flex items-start gap-3">
            <span class="w-4 h-4 rounded-full bg-ink-400 flex-shrink-0 mt-0.5"></span>
            <div><strong>Pressure vessel</strong> — 20cm+ steel contains primary coolant</div>
          </div>
          <div class="flex items-start gap-3">
            <span class="w-4 h-4 rounded-full bg-ink-300 flex-shrink-0 mt-0.5"></span>
            <div><strong>Reactor building</strong> — Reinforced concrete, aircraft-impact rated</div>
          </div>
          <div class="flex items-start gap-3">
            <span class="w-4 h-4 rounded-full bg-ink-200 flex-shrink-0 mt-0.5"></span>
            <div><strong>Containment</strong> — Double-walled structure with filtered venting</div>
          </div>
          <div class="flex items-start gap-3">
            <span class="w-4 h-4 rounded-full border-2 border-dashed border-ink-300 flex-shrink-0 mt-0.5"></span>
            <div><strong>Exclusion zone</strong> — Final buffer for residual dose mitigation</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Safety Scrolly -->
  <section class="border-b border-ink-200">
    <ScrollySection id="safety-scrolly" graphicPosition="left">
      <div slot="graphic">
        <div class="w-full max-w-md text-center">
          <p class="label mb-6">Core Damage Frequency</p>
          <div id="safety-visual" class="relative">
            <div class="text-stat" id="cdf-value">10⁻⁵</div>
            <p class="text-ink-600 mt-2" id="cdf-label">per reactor-year (Gen III+)</p>
            <div class="mt-8 h-40 flex items-end justify-center gap-4" id="safety-bars">
              <div class="w-16 bg-ink-300 transition-all duration-500" style="height: 100%;" data-gen="2">
                <p class="text-xs mt-2 text-center">Gen II</p>
              </div>
              <div class="w-16 bg-ink-950 transition-all duration-500" style="height: 10%;" data-gen="3">
                <p class="text-xs mt-2 text-center">Gen III+</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div slot="steps" class="py-20 lg:py-40">
        <div class="step px-5 lg:px-10 min-h-[80vh] lg:min-h-screen flex items-center" data-step="0" data-safety="passive">
          <div class="bg-white p-8 lg:p-10 border border-ink-200 max-w-md lg:ml-auto">
            <h3 class="text-display-sm mb-4">Passive Safety Systems</h3>
            <p class="text-ink-600 font-serif text-lg leading-relaxed mb-4">
              Gen III+ reactors use gravity-driven water flow and natural convection for emergency cooling. The AP1000 requires <strong>no pumps or AC power</strong> for at least 72 hours after shutdown.
            </p>
            <p class="text-sm text-ink-500">
              The EPR features a core-catcher to passively contain melted core material in severe accidents.
            </p>
          </div>
        </div>

        <div class="step px-5 lg:px-10 min-h-[80vh] lg:min-h-screen flex items-center" data-step="1" data-safety="htgr">
          <div class="bg-white p-8 lg:p-10 border border-ink-200 max-w-md lg:ml-auto">
            <h3 class="text-display-sm mb-4">Meltdown-Proof by Design</h3>
            <p class="text-ink-600 font-serif text-lg leading-relaxed mb-4">
              High-Temperature Gas Reactors use TRISO fuel particles that <strong>cannot melt</strong>. Decay heat is removed passively by conduction and radiation.
            </p>
            <p class="text-sm text-ink-500">
              Tests have demonstrated: stopping all cooling results in passive cooldown with no fuel damage.
            </p>
          </div>
        </div>

        <div class="step px-5 lg:px-10 min-h-[80vh] lg:min-h-screen flex items-center" data-step="2" data-safety="security">
          <div class="bg-white p-8 lg:p-10 border border-ink-200 max-w-md lg:ml-auto">
            <h3 class="text-display-sm mb-4">Physical Protection</h3>
            <p class="text-ink-600 font-serif text-lg leading-relaxed mb-4">
              Modern containments withstand large aircraft crashes. The EPR has double-walled concrete containment with aircraft-impact resistant safety buildings.
            </p>
            <p class="text-sm text-ink-500">
              Security-by-design: fewer systems to tamper with, vital equipment inside robust containment.
            </p>
          </div>
        </div>
      </div>
    </ScrollySection>
  </section>

  <!-- SMRs Section -->
  <section class="section border-b border-ink-200">
    <div class="container-narrow">
      <h2 class="text-display-sm mb-4">Small Modular Reactors</h2>
      <div class="prose">
        <p>
          SMRs are designed for incremental capacity addition—a 300 MW module can be added as demand grows, lowering upfront commitment and enabling deployment in smaller grids or remote areas.
        </p>

        <p>
          The key insight is <strong>economies of series</strong>: building 30-50+ identical units unlocks cost benefits through factory mass production. Large reactors provide economies of scale; SMRs provide economies of manufacturing.
        </p>

        <h3>Licensed SMR Designs</h3>

        <ul>
          <li><strong>NuScale VOYGR</strong> (77 MW/module) — First SMR certified by US NRC (2022). First plant planned ~2029.</li>
          <li><strong>GE Hitachi BWRX-300</strong> (300 MW) — Under licensing in Canada/USA. Orders in Ontario and Poland.</li>
          <li><strong>Rolls-Royce SMR</strong> (470 MW) — UK design assessment in progress. Target: early 2030s.</li>
        </ul>

        <p>
          Construction times for SMRs are estimated at 3-4 years per module once supply chains mature, with overall first deployment taking 5-7 years including regulatory and FOAK setup.
        </p>
      </div>
    </div>
  </section>

  <!-- SMR Learning Curve -->
  <section class="section border-b border-ink-200 bg-paper-100">
    <div class="container-wide">
      <h2 class="text-display-sm mb-4">The SMR Learning Curve</h2>
      <p class="text-ink-600 font-serif text-lg mb-8 max-w-2xl">
        First units are expensive—but costs fall predictably with each deployment. SMR economics depend on building 30-50+ units to capture manufacturing learning.
      </p>
      <div id="smr-learning-chart" class="w-full h-[400px] bg-white border border-ink-200 flex items-center justify-center">
        <p class="text-ink-400">Loading chart...</p>
      </div>
      <p class="text-sm text-ink-500 mt-4">
        Projected cost trajectory assuming 10% learning rate (costs fall 10% with each doubling of cumulative units). Based on industry analogies and NEA/IEA analysis.
      </p>
    </div>
  </section>

  <!-- Gen IV Technologies -->
  <section class="section border-b border-ink-200 bg-paper-100">
    <div class="container-wide">
      <h2 class="text-display-sm mb-4">Category 3: Advanced Reactors (5-10 Year Horizon)</h2>
      <p class="text-ink-600 font-serif text-lg mb-10 max-w-2xl">
        Generation IV designs promise dramatically better fuel economy, reduced waste, and higher temperature output for industrial applications.
      </p>

      <div class="grid md:grid-cols-2 gap-8">
        <div class="bg-white border border-ink-200 p-8">
          <p class="label mb-3">Sodium-Cooled Fast Reactors</p>
          <h3 class="text-xl font-bold mb-4">TerraPower Natrium</h3>
          <p class="text-ink-600 mb-4">
            345 MW sodium fast reactor with molten salt heat storage. US DOE-backed demonstration plant by 2030. Can breed fuel or burn actinides, improving fuel utilization.
          </p>
          <p class="text-sm text-ink-500">Also: China CFR-600 (grid connection 2025-26)</p>
        </div>

        <div class="bg-white border border-ink-200 p-8">
          <p class="label mb-3">Molten Salt Reactors</p>
          <h3 class="text-xl font-bold mb-4">TMSR-LF1 (China)</h3>
          <p class="text-ink-600 mb-4">
            2 MW experimental thorium-uranium fuel salt reactor. First criticality 2021—world's first MSR critical in decades. Low-pressure, inherent safety via freeze plug drain system.
          </p>
          <p class="text-sm text-ink-500">Also: Terrestrial Energy IMSR, Kairos Power FHR</p>
        </div>

        <div class="bg-white border border-ink-200 p-8">
          <p class="label mb-3">High-Temperature Gas Reactors</p>
          <h3 class="text-xl font-bold mb-4">X-energy Xe-100</h3>
          <p class="text-ink-600 mb-4">
            80 MW pebble-bed helium-cooled module. US ARDP demonstration by ~2027. TRISO fuel, meltdown-proof. Targets industrial process heat and cogeneration.
          </p>
          <p class="text-sm text-ink-500">Also: Project Pele (5 MW mobile microreactor)</p>
        </div>

        <div class="bg-white border border-ink-200 p-8">
          <p class="label mb-3">Lead-Cooled Fast Reactors</p>
          <h3 class="text-xl font-bold mb-4">BREST-OD-300 (Russia)</h3>
          <p class="text-ink-600 mb-4">
            300 MW lead-cooled fast reactor. Construction began 2021. Dense nitride fuel with on-site closed fuel cycle facility—aims to fully recycle its own fuel.
          </p>
          <p class="text-sm text-ink-500">Also: ALFRED (Europe, 125 MW proposed)</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Fuel Cycle -->
  <section class="section border-b border-ink-200">
    <div class="container-narrow">
      <h2 class="text-display-sm mb-4">Fuel Cycle and Waste</h2>
      <div class="prose">
        <p>
          Modern reactors achieve higher fuel burnup than previous generations: Gen III+ designs reach <strong>50-65 GWd/tonne</strong> vs ~35 GWd/t for Gen II. This means more energy per unit of uranium and less waste per MWh generated.
        </p>

        <h3>Waste Reality</h3>
        <p>
          A typical 1 GW LWR produces about <strong>20-30 tonnes of spent fuel per year</strong>. The composition after one cycle is roughly:
        </p>
        <ul>
          <li>~95% unused U-238</li>
          <li>~1% U-235</li>
          <li>~1% plutonium</li>
          <li>~3% fission products and minor actinides</li>
        </ul>

        <p>
          In open fuel cycles (no reprocessing), all this is treated as waste. In closed cycles, uranium and plutonium can be separated and recycled, reducing the volume and long-term radiotoxicity of ultimate waste.
        </p>

        <h3>Geological Disposal</h3>
        <p>
          Finland has constructed the world's first operational geological repository (ONKALO), expected to accept spent fuel in the mid-2020s. Sweden and France are in advanced licensing stages. Deep underground repositories remain the international consensus for permanent disposal.
        </p>

        <h3>Advanced Waste Reduction</h3>
        <p>
          Fast-spectrum reactors can fission transuranic elements that LWRs leave behind, extracting <strong>90-95% of fuel energy</strong> and cutting long-term radiotoxicity to a few centuries instead of millennia. Some Gen IV designs could reduce required isolation time to ~300-500 years.
        </p>
      </div>
    </div>
  </section>

  <!-- Radiotoxicity Chart -->
  <section class="section border-b border-ink-200 bg-ink-950 text-white">
    <div class="container-wide">
      <h2 class="text-display-sm text-white mb-4">Waste Radiotoxicity Over Time</h2>
      <p class="text-ink-300 font-serif text-lg mb-8 max-w-2xl">
        Spent fuel becomes less radioactive than natural uranium ore in ~300 years with reprocessing, or ~300,000 years in open cycles. Fast reactors dramatically shorten isolation requirements.
      </p>
      <div id="radiotoxicity-chart" class="w-full h-[400px] bg-ink-900 border border-ink-700 flex items-center justify-center">
        <p class="text-ink-500">Loading chart...</p>
      </div>
      <div class="mt-6 flex flex-wrap gap-6 text-sm text-ink-300">
        <div class="flex items-center gap-2">
          <span class="w-8 h-0.5 bg-red-400"></span>
          <span>Open cycle (no reprocessing)</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="w-8 h-0.5 bg-emerald-400"></span>
          <span>Closed cycle (fast reactors)</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="w-8 h-0.5 bg-amber-400 opacity-50" style="border-top: 2px dashed;"></span>
          <span>Natural uranium ore level</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Conclusion -->
  <section class="section bg-ink-950 text-white">
    <div class="container-narrow">
      <h2 class="text-display-sm text-white mb-6">Conclusion</h2>
      <div class="prose text-ink-300">
        <p>
          Today's production-ready reactors (Category 1) are the safest and most efficient fission plants ever operated. China is aggressively building Gen III plants while investing in all Gen IV categories. Europe has a more cautious trajectory—completing a few large Gen III projects while exploring SMRs.
        </p>
        <p class="text-white">
          These efforts underscore that nuclear fission remains vital to the clean energy transition. Category 1 reactors provide proven large-scale power now, while Categories 2 and 3 ensure more innovative, economic, and sustainable options will be available in the near future.
        </p>
      </div>
      <div class="mt-10 flex flex-col sm:flex-row gap-4">
        <a href="/research/energy-strategy" class="btn bg-white text-ink-950 hover:bg-ink-100">
          Read our energy strategy
        </a>
        <a href="/research/coal-gas" class="btn border border-ink-500 text-white hover:bg-ink-800">
          Coal vs Gas analysis
        </a>
      </div>
    </div>
  </section>

  <!-- Sources -->
  <section class="section border-t border-ink-200">
    <div class="container-narrow">
      <h2 class="text-display-sm mb-6">References</h2>

      <div class="space-y-8">
        <div>
          <p class="font-semibold mb-3">Primary Data Sources</p>
          <ul class="text-sm text-ink-600 space-y-2">
            <li><a href="https://pris.iaea.org/pris/" class="underline">IAEA Power Reactor Information System (PRIS)</a> — Global reactor database, capacity factors, operational status</li>
            <li><a href="https://world-nuclear.org/information-library" class="underline">World Nuclear Association Information Library</a> — Reactor designs, country profiles, economics</li>
            <li><a href="https://www.iea.org/reports/world-energy-outlook-2023" class="underline">IEA World Energy Outlook 2023</a> — LCOE estimates, capacity projections</li>
            <li><a href="https://www.eia.gov/outlooks/aeo/" class="underline">US EIA Annual Energy Outlook 2024</a> — US nuclear cost estimates</li>
          </ul>
        </div>

        <div>
          <p class="font-semibold mb-3">Reactor Economics</p>
          <ul class="text-sm text-ink-600 space-y-2">
            <li>MIT Energy Initiative (2018). <em>The Future of Nuclear Energy in a Carbon-Constrained World</em>. <a href="https://energy.mit.edu/research/future-nuclear-energy-carbon-constrained-world/" class="underline">Link</a></li>
            <li>Lazard (2023). <em>Levelized Cost of Energy Analysis—Version 16.0</em>. <a href="https://www.lazard.com/research-insights/levelized-cost-of-energyplus/" class="underline">Link</a></li>
            <li>OECD NEA (2020). <em>Projected Costs of Generating Electricity 2020</em>. <a href="https://www.oecd-nea.org/jcms/pl_51110" class="underline">Link</a></li>
          </ul>
        </div>

        <div>
          <p class="font-semibold mb-3">Safety & Regulation</p>
          <ul class="text-sm text-ink-600 space-y-2">
            <li>US NRC (2022). <em>NuScale Small Modular Reactor Design Certification</em>. <a href="https://www.nrc.gov/reactors/new-reactors/smr/nuscale.html" class="underline">Link</a></li>
            <li>IAEA Safety Standards Series No. SSR-2/1 (2016). <em>Safety of Nuclear Power Plants: Design</em></li>
            <li>EUR (European Utility Requirements) Document, Rev. E (2017). Nuclear Plant Design Requirements</li>
          </ul>
        </div>

        <div>
          <p class="font-semibold mb-3">Advanced Reactors</p>
          <ul class="text-sm text-ink-600 space-y-2">
            <li>Generation IV International Forum (2023). <em>Annual Report</em>. <a href="https://www.gen-4.org/" class="underline">Link</a></li>
            <li>US DOE Office of Nuclear Energy. <em>Advanced Reactor Demonstration Program</em>. <a href="https://www.energy.gov/ne/advanced-reactor-demonstration-program" class="underline">Link</a></li>
            <li>TerraPower. <em>Natrium Technology</em>. <a href="https://www.terrapower.com/our-work/natriumpower/" class="underline">Link</a></li>
            <li>X-energy. <em>Xe-100 Reactor</em>. <a href="https://x-energy.com/reactors/xe-100" class="underline">Link</a></li>
          </ul>
        </div>

        <div>
          <p class="font-semibold mb-3">Fuel Cycle & Waste</p>
          <ul class="text-sm text-ink-600 space-y-2">
            <li>Posiva Oy. <em>Onkalo Spent Nuclear Fuel Repository</em>. <a href="https://www.posiva.fi/en" class="underline">Link</a></li>
            <li>World Nuclear Association (2023). <em>Radioactive Waste Management</em>. <a href="https://world-nuclear.org/information-library/nuclear-fuel-cycle/nuclear-waste/radioactive-waste-management" class="underline">Link</a></li>
            <li>IAEA (2022). <em>Status and Trends in Spent Fuel and Radioactive Waste Management</em>. NW-T-1.14 (Rev. 1)</li>
          </ul>
        </div>

        <div>
          <p class="font-semibold mb-3">Industry News & Updates</p>
          <ul class="text-sm text-ink-600 space-y-2">
            <li><a href="https://world-nuclear-news.org/" class="underline">World Nuclear News</a></li>
            <li><a href="https://www.nucnet.org/" class="underline">NucNet — The Independent Nuclear News Agency</a></li>
            <li><a href="https://www.ans.org/news/" class="underline">American Nuclear Society News</a></li>
          </ul>
        </div>
      </div>

      <p class="text-sm text-ink-500 mt-10 border-t border-ink-200 pt-6">
        Data in this report reflects publicly available information as of January 2026. Reactor specifications and project timelines are subject to change. For the most current data, consult the IAEA PRIS database and official vendor documentation.
      </p>
    </div>
  </section>
</BaseLayout>

<script>
  import scrollama from 'scrollama';
  import * as Plot from '@observablehq/plot';

  // ============================================
  // LCOE Waterfall Chart
  // ============================================
  function renderLCOEWaterfall() {
    const container = document.getElementById('lcoe-waterfall-chart');
    if (!container) return;

    // LCOE breakdown data ($/MWh contributions)
    const data = [
      { component: 'Construction\nCapital', value: 28, cumulative: 0 },
      { component: 'Financing\nCosts', value: 18, cumulative: 28 },
      { component: 'O&M\n(Fixed)', value: 9, cumulative: 46 },
      { component: 'O&M\n(Variable)', value: 3, cumulative: 55 },
      { component: 'Fuel', value: 5, cumulative: 58 },
      { component: 'Decommission\n& Waste', value: 2, cumulative: 63 },
    ];

    const chart = Plot.plot({
      width: container.clientWidth,
      height: 360,
      marginLeft: 50,
      marginBottom: 70,
      marginTop: 30,
      style: { background: 'transparent', fontFamily: 'Inter, system-ui, sans-serif' },
      x: {
        label: null,
        domain: data.map(d => d.component),
        padding: 0.3,
      },
      y: {
        label: '$/MWh',
        domain: [0, 75],
        grid: true,
      },
      marks: [
        // Floating bars (waterfall)
        Plot.barY(data, {
          x: 'component',
          y1: 'cumulative',
          y2: d => d.cumulative + d.value,
          fill: d => d.component.includes('Financing') || d.component.includes('Construction') ? '#0f172a' : '#64748b',
        }),
        // Value labels
        Plot.text(data, {
          x: 'component',
          y: d => d.cumulative + d.value / 2,
          text: d => `$${d.value}`,
          fill: 'white',
          fontSize: 12,
          fontWeight: 600,
        }),
        // Cumulative line showing total
        Plot.ruleY([65], { stroke: '#dc2626', strokeWidth: 2, strokeDasharray: '4,4' }),
        Plot.text([{ x: 'Decommission\n& Waste', y: 68 }], {
          x: 'x',
          y: 'y',
          text: ['Total LCOE: ~$65/MWh'],
          fill: '#dc2626',
          fontSize: 11,
          fontWeight: 600,
        }),
      ],
    });

    container.innerHTML = '';
    container.appendChild(chart);
  }

  // ============================================
  // CapEx vs Build Time Scatter Plot
  // ============================================
  function renderCapExScatter() {
    const container = document.getElementById('capex-scatter-chart');
    if (!container) return;

    // Project data: [name, build_time_years, capex_per_kw, region]
    const projects = [
      // Western FOAK (red)
      { name: 'Vogtle 3&4', years: 14, capex: 9500, region: 'Western FOAK' },
      { name: 'Hinkley C', years: 12, capex: 9000, region: 'Western FOAK' },
      { name: 'Olkiluoto 3', years: 18, capex: 8500, region: 'Western FOAK' },
      { name: 'Flamanville 3', years: 17, capex: 8000, region: 'Western FOAK' },
      // China (green)
      { name: 'Taishan 1', years: 9, capex: 3200, region: 'China' },
      { name: 'Taishan 2', years: 9.5, capex: 3300, region: 'China' },
      { name: 'Fuqing 5', years: 5.5, capex: 2800, region: 'China' },
      { name: 'Fuqing 6', years: 5, capex: 2600, region: 'China' },
      { name: 'Karachi 2', years: 6, capex: 3000, region: 'China' },
      { name: 'Sanmen 1', years: 9, capex: 3500, region: 'China' },
      // Korea/UAE (blue)
      { name: 'Barakah 1', years: 8, capex: 4200, region: 'Korea/UAE' },
      { name: 'Barakah 2', years: 7.5, capex: 3800, region: 'Korea/UAE' },
      { name: 'Barakah 3', years: 7, capex: 3500, region: 'Korea/UAE' },
      { name: 'Shin Kori 3', years: 7, capex: 2400, region: 'Korea/UAE' },
      { name: 'Shin Kori 4', years: 6.5, capex: 2200, region: 'Korea/UAE' },
      // Russia (amber)
      { name: 'Leningrad II-1', years: 8, capex: 2000, region: 'Russia' },
      { name: 'Novovoronezh II-1', years: 7, capex: 1800, region: 'Russia' },
      { name: 'Belarus 1', years: 6, capex: 2200, region: 'Russia' },
    ];

    const regionColors: Record<string, string> = {
      'Western FOAK': '#ef4444',
      'China': '#10b981',
      'Korea/UAE': '#3b82f6',
      'Russia': '#f59e0b',
    };

    const chart = Plot.plot({
      width: container.clientWidth,
      height: 400,
      marginLeft: 60,
      marginBottom: 50,
      marginRight: 20,
      style: { background: 'transparent', fontFamily: 'Inter, system-ui, sans-serif' },
      x: {
        label: 'Construction Time (years) →',
        domain: [4, 20],
        grid: true,
      },
      y: {
        label: '↑ Overnight CapEx ($/kW)',
        domain: [1000, 10500],
        grid: true,
      },
      marks: [
        // Reference zones
        Plot.rect([{ x1: 4, x2: 8, y1: 1000, y2: 4000 }], {
          x1: 'x1', x2: 'x2', y1: 'y1', y2: 'y2',
          fill: '#10b981',
          fillOpacity: 0.1,
        }),
        Plot.text([{ x: 6, y: 3800 }], {
          x: 'x', y: 'y',
          text: ['Target zone'],
          fill: '#10b981',
          fontSize: 10,
        }),
        // Project dots
        Plot.dot(projects, {
          x: 'years',
          y: 'capex',
          fill: d => regionColors[d.region],
          r: 8,
          stroke: 'white',
          strokeWidth: 1.5,
        }),
        // Labels for notable projects
        Plot.text(projects.filter(p => ['Vogtle 3&4', 'Fuqing 6', 'Shin Kori 4', 'Olkiluoto 3'].includes(p.name)), {
          x: 'years',
          y: 'capex',
          text: 'name',
          fontSize: 9,
          dy: -14,
          fill: '#374151',
        }),
      ],
    });

    container.innerHTML = '';
    container.appendChild(chart);
  }

  // ============================================
  // Radiotoxicity Over Time Chart
  // ============================================
  function renderRadiotoxicityChart() {
    const container = document.getElementById('radiotoxicity-chart');
    if (!container) return;

    // Generate log-scale data points
    const openCycle: { years: number; toxicity: number }[] = [];
    const closedCycle: { years: number; toxicity: number }[] = [];
    const uraniumOre = 1; // Reference level

    for (let i = 0; i <= 6; i++) {
      const years = Math.pow(10, i);
      // Open cycle: stays high for ~300,000 years
      const openTox = years < 100 ? 1000 : years < 1000 ? 500 : years < 10000 ? 100 : years < 100000 ? 10 : 1;
      // Closed cycle: drops to ore level in ~300 years
      const closedTox = years < 10 ? 800 : years < 100 ? 50 : years < 300 ? 5 : 0.8;
      openCycle.push({ years, toxicity: openTox });
      closedCycle.push({ years, toxicity: closedTox });
    }

    const chart = Plot.plot({
      width: container.clientWidth,
      height: 350,
      marginLeft: 60,
      marginBottom: 50,
      style: { background: 'transparent', fontFamily: 'Inter, system-ui, sans-serif', color: '#9ca3af' },
      x: {
        type: 'log',
        label: 'Years after discharge →',
        domain: [1, 1000000],
        ticks: [1, 10, 100, 1000, 10000, 100000, 1000000],
        tickFormat: d => d >= 1000 ? `${d/1000}k` : String(d),
      },
      y: {
        type: 'log',
        label: '↑ Relative radiotoxicity',
        domain: [0.5, 2000],
        grid: true,
      },
      marks: [
        // Natural uranium ore reference line
        Plot.ruleY([1], { stroke: '#fbbf24', strokeWidth: 2, strokeDasharray: '8,4', strokeOpacity: 0.7 }),
        Plot.text([{ x: 500000, y: 1.5 }], {
          x: 'x', y: 'y',
          text: ['Natural uranium ore'],
          fill: '#fbbf24',
          fontSize: 10,
        }),
        // Open cycle line
        Plot.line(openCycle, {
          x: 'years',
          y: 'toxicity',
          stroke: '#f87171',
          strokeWidth: 3,
        }),
        // Closed cycle line
        Plot.line(closedCycle, {
          x: 'years',
          y: 'toxicity',
          stroke: '#34d399',
          strokeWidth: 3,
        }),
        // Key annotations
        Plot.text([{ x: 300, y: 3 }], {
          x: 'x', y: 'y',
          text: ['~300 years\n(closed cycle)'],
          fill: '#34d399',
          fontSize: 10,
          lineAnchor: 'bottom',
        }),
        Plot.text([{ x: 200000, y: 15 }], {
          x: 'x', y: 'y',
          text: ['~300,000 years\n(open cycle)'],
          fill: '#f87171',
          fontSize: 10,
        }),
      ],
    });

    container.innerHTML = '';
    container.appendChild(chart);
  }

  // ============================================
  // SMR Learning Curve
  // ============================================
  function renderSMRLearningCurve() {
    const container = document.getElementById('smr-learning-chart');
    if (!container) return;

    // Learning curve: 10% cost reduction per doubling
    // Cost_n = Cost_1 * n^(log2(0.9))
    const learningRate = 0.9;
    const exponent = Math.log2(learningRate);
    const foakCost = 8000; // $/kW for first unit

    const data: { units: number; cost: number }[] = [];
    for (let n = 1; n <= 100; n++) {
      data.push({
        units: n,
        cost: foakCost * Math.pow(n, exponent),
      });
    }

    // Key milestones
    const milestones = [
      { units: 1, label: 'FOAK', cost: foakCost },
      { units: 5, label: '5th unit', cost: foakCost * Math.pow(5, exponent) },
      { units: 10, label: '10th', cost: foakCost * Math.pow(10, exponent) },
      { units: 30, label: '30th', cost: foakCost * Math.pow(30, exponent) },
      { units: 50, label: '50th', cost: foakCost * Math.pow(50, exponent) },
    ];

    const chart = Plot.plot({
      width: container.clientWidth,
      height: 350,
      marginLeft: 60,
      marginBottom: 50,
      marginRight: 20,
      style: { background: 'transparent', fontFamily: 'Inter, system-ui, sans-serif' },
      x: {
        label: 'Cumulative units deployed →',
        domain: [0, 105],
      },
      y: {
        label: '↑ Cost ($/kW)',
        domain: [3000, 8500],
        grid: true,
      },
      marks: [
        // Target cost zone
        Plot.rect([{ x1: 0, x2: 105, y1: 3000, y2: 4500 }], {
          x1: 'x1', x2: 'x2', y1: 'y1', y2: 'y2',
          fill: '#10b981',
          fillOpacity: 0.1,
        }),
        Plot.text([{ x: 85, y: 3800 }], {
          x: 'x', y: 'y',
          text: ['Competitive with\nlarge reactors'],
          fill: '#10b981',
          fontSize: 10,
        }),
        // Learning curve line
        Plot.line(data, {
          x: 'units',
          y: 'cost',
          stroke: '#0f172a',
          strokeWidth: 3,
        }),
        // Milestone points
        Plot.dot(milestones, {
          x: 'units',
          y: 'cost',
          fill: '#0f172a',
          r: 6,
        }),
        Plot.text(milestones, {
          x: 'units',
          y: 'cost',
          text: d => `${d.label}\n$${Math.round(d.cost).toLocaleString()}`,
          dy: d => d.units < 20 ? -20 : -15,
          fontSize: 9,
          lineAnchor: 'bottom',
        }),
      ],
    });

    container.innerHTML = '';
    container.appendChild(chart);
  }

  // Category data
  const categories = {
    1: {
      name: 'Commercially Deployed',
      reactors: [
        { name: 'AP1000', capacity: '1,150 MW' },
        { name: 'EPR', capacity: '1,600 MW' },
        { name: 'Hualong One', capacity: '1,090 MW' },
        { name: 'VVER-1200', capacity: '1,200 MW' },
      ]
    },
    2: {
      name: 'Licensed, Limited Deployment',
      reactors: [
        { name: 'NuScale VOYGR', capacity: '77 MW' },
        { name: 'BWRX-300', capacity: '300 MW' },
        { name: 'Rolls-Royce SMR', capacity: '470 MW' },
        { name: 'CAREM-25', capacity: '27 MW' },
      ]
    },
    3: {
      name: 'Advanced Demonstrations',
      reactors: [
        { name: 'Natrium (SFR)', capacity: '345 MW' },
        { name: 'Xe-100 (HTGR)', capacity: '80 MW' },
        { name: 'BREST-OD-300 (LFR)', capacity: '300 MW' },
        { name: 'TMSR-LF1 (MSR)', capacity: '2 MW' },
      ]
    }
  };

  function updateCategoryDisplay(cat: number) {
    const data = categories[cat as keyof typeof categories];
    const numEl = document.getElementById('category-number');
    const nameEl = document.getElementById('category-name');
    const itemsEl = document.getElementById('reactor-items');

    if (numEl) numEl.textContent = String(cat);
    if (nameEl) nameEl.textContent = data.name;
    if (itemsEl) {
      itemsEl.innerHTML = data.reactors.map(r =>
        `<li class="flex justify-between"><span>${r.name}</span><span class="text-ink-500">${r.capacity}</span></li>`
      ).join('');
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    // Render all charts
    renderLCOEWaterfall();
    renderCapExScatter();
    renderRadiotoxicityChart();
    renderSMRLearningCurve();

    // Handle resize
    let resizeTimeout: ReturnType<typeof setTimeout>;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(() => {
        renderLCOEWaterfall();
        renderCapExScatter();
        renderRadiotoxicityChart();
        renderSMRLearningCurve();
      }, 250);
    });

    // Categories scrolly
    const catScrolly = document.getElementById('categories-scrolly');
    if (catScrolly) {
      catScrolly.addEventListener('stepchange', ((e: CustomEvent) => {
        const step = e.detail.element;
        const cat = parseInt(step.dataset.category || '1');
        updateCategoryDisplay(cat);
      }) as EventListener);
    }
  });
</script>
