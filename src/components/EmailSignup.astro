---
interface Props {
  variant?: 'default' | 'compact' | 'hero';
  heading?: string;
  subheading?: string;
}

const {
  variant = 'default',
  heading = 'Stay Informed',
  subheading = 'Get updates on European energy policy and our campaign progress.',
} = Astro.props;

const isHero = variant === 'hero';
const isCompact = variant === 'compact';
---

<div class:list={[
  'email-signup',
  isHero && 'text-center',
]}>
  {!isCompact && heading && (
    <div class="mb-5">
      <h3 class:list={['font-semibold text-slate-900', isHero ? 'text-xl' : 'text-lg']}>
        {heading}
      </h3>
      {subheading && <p class="text-slate-600 mt-1 text-sm">{subheading}</p>}
    </div>
  )}

  <form
    action="/api/subscribe"
    method="POST"
    class:list={[
      'flex gap-2',
      isHero ? 'flex-col sm:flex-row justify-center max-w-lg mx-auto' : 'flex-col sm:flex-row',
    ]}
  >
    <div class="flex-1">
      <label for="email" class="sr-only">Email address</label>
      <input
        type="email"
        id="email"
        name="email"
        required
        placeholder="your@email.com"
        class="w-full px-3 py-2.5 text-sm rounded border border-slate-300 focus:ring-2 focus:ring-navy-500 focus:border-navy-500 outline-none transition-shadow"
      />
    </div>

    <div class:list={[!isCompact && 'sm:w-auto']}>
      <select
        name="country"
        class="w-full sm:w-auto px-3 py-2.5 text-sm rounded border border-slate-300 focus:ring-2 focus:ring-navy-500 focus:border-navy-500 outline-none bg-white"
      >
        <option value="">Country</option>
        <option value="AT">Austria</option>
        <option value="BE">Belgium</option>
        <option value="BG">Bulgaria</option>
        <option value="HR">Croatia</option>
        <option value="CY">Cyprus</option>
        <option value="CZ">Czech Republic</option>
        <option value="DK">Denmark</option>
        <option value="EE">Estonia</option>
        <option value="FI">Finland</option>
        <option value="FR">France</option>
        <option value="DE">Germany</option>
        <option value="GR">Greece</option>
        <option value="HU">Hungary</option>
        <option value="IE">Ireland</option>
        <option value="IT">Italy</option>
        <option value="LV">Latvia</option>
        <option value="LT">Lithuania</option>
        <option value="LU">Luxembourg</option>
        <option value="MT">Malta</option>
        <option value="NL">Netherlands</option>
        <option value="PL">Poland</option>
        <option value="PT">Portugal</option>
        <option value="RO">Romania</option>
        <option value="SK">Slovakia</option>
        <option value="SI">Slovenia</option>
        <option value="ES">Spain</option>
        <option value="SE">Sweden</option>
        <option value="OTHER">Other</option>
      </select>
    </div>

    <button type="submit" class="btn btn-primary whitespace-nowrap px-5">
      Subscribe
    </button>
  </form>

  <p class="text-xs text-slate-500 mt-3">
    No spam. Unsubscribe anytime.
  </p>
</div>
